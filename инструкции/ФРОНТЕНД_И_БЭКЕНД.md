# –§–†–û–ù–¢–ï–ù–î –ò –ë–≠–ö–ï–ù–î QA –°–ò–°–¢–ï–ú–´

**–î–∞—Ç–∞:** 2025-01-07
**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `/home/olga/normativ_docs/–í–æ–ª–∫–æ–≤/`

---

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

QA —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ñ–ö–• —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:

- **–ë—ç–∫–µ–Ω–¥** - API —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–æ–π
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- **–í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞** - FAISS –∏–Ω–¥–µ–∫—Å—ã —Å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

---

## –ë–≠–ö–ï–ù–î

**–§–∞–π–ª:** `vector-db-test/backend/main_cpu.py`
**–¢–∏–ø:** FastAPI —Å–µ—Ä–≤–µ—Ä
**–ü–æ—Ä—Ç:** 8001 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

1. **–ü–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ** - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
2. **–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** - —É–ª—É—á—à–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ YandexGPT
3. **API endpoints:**
   - `/llm-search` - –ø–æ–∏—Å–∫ —Å LLM –æ—Ç–≤–µ—Ç–æ–º
   - `/search` - –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ
   - `/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞

### –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞:

```bash
cd /home/olga/normativ_docs/–í–æ–ª–∫–æ–≤
python vector-db-test/backend/main_cpu.py
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8001/docs
- –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FastAPI

---

## –§–†–û–ù–¢–ï–ù–î

**–§–∞–π–ª:** `frontend/index.html`
**–¢–∏–ø:** –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–æ–¥–∏–Ω HTML —Ñ–∞–π–ª)
**–ü–æ—Ä—Ç:** 8080 (—á–µ—Ä–µ–∑ HTTP —Å–µ—Ä–≤–µ—Ä)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

1. **–ü–æ–∏—Å–∫ –ø–æ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º**
2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏**
3. **–£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

```bash
cd /home/olga/normativ_docs/–í–æ–ª–∫–æ–≤
python run_frontend_server.py
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8080
- –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞

---

## –ü–û–õ–ù–´–ô –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥

```bash
cd /home/olga/normativ_docs/–í–æ–ª–∫–æ–≤
python vector-db-test/backend/main_cpu.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8001
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
cd /home/olga/normativ_docs/–í–æ–ª–∫–æ–≤
python run_frontend_server.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
============================================================
üöÄ –ó–ê–ü–£–°–ö –§–†–û–ù–¢–ï–ù–î–ê QA –°–ò–°–¢–ï–ú–´
============================================================
üìç URL: http://localhost:8080
üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /home/olga/normativ_docs/–í–æ–ª–∫–æ–≤/frontend
üîó API: http://localhost:8001
============================================================
–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
```

### –®–∞–≥ 3: –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞: http://localhost:8080

---

## –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –°–ò–°–¢–ï–ú–´

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **"–ö–∞–∫–∏–µ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è?"**
2. **"–ß—Ç–æ —Ç–∞–∫–æ–µ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ?"**
3. **"–ö—Ç–æ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã?"**
4. **"–ö–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ä–∞—Å—á–µ—Ç –ø–ª–∞—Ç—ã?"**
5. **"–ö–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫ –∂–∏–ª—å—è?"**

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–¥–æ–∫—É–º–µ–Ω—Ç, —Å—Ç–∞—Ç—å—è, –ø—É–Ω–∫—Ç)
- ‚úÖ –î–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç

---

## –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
/home/olga/normativ_docs/–í–æ–ª–∫–æ–≤/
‚îú‚îÄ‚îÄ vector-db-test/
‚îÇ   ‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main_cpu.py          # –ë—ç–∫–µ–Ω–¥ (FastAPI)
‚îÇ   ‚îî‚îÄ‚îÄ vectordb/                 # –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –±–∞–∑—ã FAISS
‚îÇ       ‚îú‚îÄ‚îÄ –ü–ü_–†–§_‚Ññ_354/         # –ë–∞–∑–∞ –¥–ª—è –ü—Ä–∞–≤–∏–ª 354
‚îÇ       ‚îú‚îÄ‚îÄ –ñ–ö_–†–§/               # –ë–∞–∑–∞ –¥–ª—è –ñ–∏–ª–∏—â–Ω–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞
‚îÇ       ‚îî‚îÄ‚îÄ ...                   # –î—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ index.html               # –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
‚îú‚îÄ‚îÄ run_frontend_server.py       # –°–µ—Ä–≤–µ—Ä –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îú‚îÄ‚îÄ universal_chunker.py         # –°–æ–∑–¥–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤
‚îú‚îÄ‚îÄ document_processor.py        # –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –±–∞–∑
‚îî‚îÄ‚îÄ check_chunk_quality.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —á–∞–Ω–∫–æ–≤
```

---

## –ù–ê–°–¢–†–û–ô–ö–ê

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—ç–∫–µ–Ω–¥–∞:

**–§–∞–π–ª:** `vector-db-test/.env`

```bash
YANDEX_API_KEY=–≤–∞—à_–∫–ª—é—á
YANDEX_FOLDER_ID=–≤–∞—à_folder_id
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤:

**–ë—ç–∫–µ–Ω–¥ (–≤ main_cpu.py):**
```python
if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8001)  # –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç
```

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ (–≤ run_frontend_server.py):**
```python
PORT = 8080  # –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç
```

---

## –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### –ë—ç–∫–µ–Ω–¥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

**–û—à–∏–±–∫–∞:** `ModuleNotFoundError: No module named 'fastapi'`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /home/olga/normativ_docs/–í–æ–ª–∫–æ–≤
pip install fastapi uvicorn
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API:

**–û—à–∏–±–∫–∞:** `Connection refused` –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:8001/health`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –≤ `frontend/index.html` (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `API_URL`)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –±—ç–∫–µ–Ω–¥–µ

### –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:

**–û—à–∏–±–∫–∞:** `FileNotFoundError: vectordb/...`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞: `ls vector-db-test/vectordb/`
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –µ—Å–ª–∏ –Ω–µ—Ç: `python document_processor.py`

---

## –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í

### API –±—ç–∫–µ–Ω–¥–∞ (FastAPI):

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8001/docs

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:**

1. **POST /llm-search**
   - –ü–æ–∏—Å–∫ —Å LLM –æ—Ç–≤–µ—Ç–æ–º
   - Body: `{"query": "–≤–æ–ø—Ä–æ—Å", "database": "current"}`

2. **POST /search**
   - –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
   - Body: `{"query": "–≤–æ–ø—Ä–æ—Å", "top_k": 5}`

3. **GET /health**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
   - –û—Ç–≤–µ—Ç: `{"status": "ok"}`

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

**–§–∞–π–ª:** `frontend/index.html`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ URL API:**
```javascript
// –ù–∞–π—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é API_URL –∏ –∏–∑–º–µ–Ω–∏—Ç—å
const API_URL = "http://localhost:8001";  // –ò–∑–º–µ–Ω–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π:**
- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞: —Å—Ç—Ä–æ–∫–∞ ~100
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: —Å—Ç—Ä–æ–∫–∞ ~200

---

## –ü–†–û–î–ê–ö–®–ï–ù

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤ `.env`
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å systemd** –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏** (nginx/apache) –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd:

**–ë—ç–∫–µ–Ω–¥:** `/etc/systemd/system/qa-backend.service`
**–§—Ä–æ–Ω—Ç–µ–Ω–¥:** `/etc/systemd/system/qa-frontend.service`

**–ü–†–ò–ú–ï–ß–ê–ù–ò–ï:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ nginx –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å later –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω –¥–æ–º–µ–Ω.

---

## –ö–û–ù–¢–ê–ö–¢–´

**–ü—Ä–æ–µ–∫—Ç:** QA —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ñ–ö–•
**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `/home/olga/normativ_docs/–í–æ–ª–∫–æ–≤/`
**–î–∞—Ç–∞:** 2025-01-07
